<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Projetos</title>
</head>
<body>

<div id="app">Carregando...</div>

<script src="core/auth.js"></script>
<script src="core/storage.js"></script> 
<script src="core/router.js"></script>
<script src="core/loader.js"></script> <script>
document.addEventListener("DOMContentLoaded", () => {
  // 1. Verifica login
  if(!Auth.isLogged()){
    window.location.href = "login.html";
    return;
  }

  // 2. Tenta pegar o projeto da URL (?project=nome) ou usa o padrão
  // A função getProjectFromURL() vem do router.js
  const project = typeof getProjectFromURL === 'function' ? getProjectFromURL() : "lughlt";

  // 3. Chama a função de carregamento que está no loader.js
  loadProject(project);
});
</script>

</body>
</html>
