<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Carregando...</title>
</head>
<body>

<div id="app">Acedendo ao Banco de Dados...</div>

<script src="core/auth.js"></script>
<script src="core/storage.js"></script> 
<script src="core/router.js"></script>
<script src="core/loader.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // 1. VERIFICAÇÃO DE LOGIN (Isso está correto!)
  if(!Auth.isLogged()){
    window.location.href = "login.html";
    return;
  }

  // 2. PEGAR O NOME DO PROJETO DA URL
  // Exemplo: se o link for site.com/?project=loja1, o slug será 'loja1'
  const project = getProjectFromURL() || "lughlt";

  // 3. CARREGAR DO NEON (A função loadProject agora faz o fetch no banco)
  loadProject(project);
});
</script>

</body>
</html>
